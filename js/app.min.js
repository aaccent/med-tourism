/*
 * ATTENTION: The "eval" devtool has been used (maybe by default in mode: "development").
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
/******/ (() => { // webpackBootstrap
/******/ 	"use strict";
/******/ 	var __webpack_modules__ = ({

/***/ "./src/js/app.js":
/*!***********************!*\
  !*** ./src/js/app.js ***!
  \***********************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _modules_header_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./modules/header.js */ \"./src/js/modules/header.js\");\n\n\nnew Swiper('.reviews-section__swiper', {\n    slidesPerView: 1,\n    spaceBetween: 20,\n    // slidesOffsetBefore: 30,\n    // slidesOffsetAfter: 30,\n    breakpoints: {\n        768: {\n            slidesPerView: 2,\n        },\n        1280: {\n            slidesPerView: 2.25\n        }\n    },\n    navigation: {\n        nextEl: '.reviews-section .swiper-button-next',\n        prevEl: '.reviews-section .swiper-button-prev',\n    },\n    scrollbar: {\n      el: '.swiper-scrollbar',\n      draggable: true\n    },\n    on: {\n        init: swiper => {\n            document.addEventListener(\"DOMContentLoaded\", () => {\n                function replaceButtons(e) {\n                    var swiperButtonsEl = swiper.navigation.nextEl[0].parentElement;\n                    swiperButtonsEl.remove();\n                    if (e.matches) {\n                        swiper.el.append(swiperButtonsEl)\n                    } else {\n                        swiper.el.parentElement.previousElementSibling.append(swiperButtonsEl)\n                    }\n                }\n    \n                var mediaQuery = window.matchMedia(\"(max-width: 768px)\");\n                mediaQuery.addEventListener(\"change\", replaceButtons)\n                \n                replaceButtons(mediaQuery)\n            })\n            \n        }\n    }\n});\n\nnew Swiper('.clients-section__swiper', {\n    slidesPerView: 1,\n    spaceBetween: 20,\n    breakpoints: {\n        576: {\n            slidesPerView: 1.25\n        },\n        768: {\n            slidesPerView: 2\n        },\n        992: {\n            slidesPerView: 3,\n        },\n        1280: {\n            slidesPerView: 4\n        }\n    },\n    navigation: {\n        nextEl: '.clients-section .swiper-button-next',\n        prevEl: '.clients-section .swiper-button-prev',\n    },\n    scrollbar: {\n      el: '.swiper-scrollbar',\n      draggable: true\n    },\n    on: {\n        init: swiper => {\n            document.addEventListener(\"DOMContentLoaded\", () => {\n                function replaceButtons(e) {\n                    var swiperButtonsEl = swiper.navigation.nextEl[0].parentElement;\n                    swiperButtonsEl.remove();\n                    if (e.matches) {\n                        swiper.el.append(swiperButtonsEl)\n                    } else {\n                        swiper.el.parentElement.previousElementSibling.append(swiperButtonsEl)\n                    }\n                }\n    \n                var mediaQuery = window.matchMedia(\"(max-width: 768px)\");\n                mediaQuery.addEventListener(\"change\", replaceButtons)\n                \n                replaceButtons(mediaQuery)\n            })\n            \n        }\n    }\n});\n\n// reviews\nconst reviewItemEls = document.querySelectorAll(\".review-item\");\nlet initialMaxHeightValue;\n\nfunction checkReviewHeight(reviewItem) {\n    const textEl = reviewItem.querySelector(\".review-item__text\");\n    const readMoreEl = reviewItem.querySelector(\".review-item__more\")\n    let remValue = parseFloat(getComputedStyle(document.documentElement).fontSize)\n\n    initialMaxHeightValue = window.innerWidth <= 576 ? 0.875 * remValue * 1.5 * 4 : 1.375 * remValue * 1.5 * 4\n    \n    if (textEl.offsetHeight < textEl.scrollHeight) {\n        !reviewItem.classList.contains(\"review-item_hide\") && reviewItem.classList.add(\"review-item_hide\")\n    } else {\n        if (!reviewItem.classList.contains(\"review-item_open\")) {\n            reviewItem.className = \"reviews-section__review review-item\"\n        } else if (textEl.offsetHeight <= initialMaxHeightValue) {\n            reviewItem.className = \"reviews-section__review review-item\"\n            readMoreEl.querySelector(\"span\").innerHTML = \"Читать полностью\"\n        }\n    }\n}\n\nreviewItemEls.forEach(reviewItemEl => {\n    checkReviewHeight(reviewItemEl);\n    reviewItemEl.querySelector(\".review-item__more\").addEventListener(\"click\", e => {\n        let readMoreEl = e.currentTarget;\n        if (reviewItemEl.classList.contains(\"review-item_open\")) {\n            reviewItemEl.classList.remove(\"review-item_open\")\n            readMoreEl.querySelector(\"span\").innerHTML = \"Читать полностью\"\n        } else {\n            reviewItemEl.classList.add(\"review-item_open\")\n            readMoreEl.querySelector(\"span\").innerHTML = \"Свернуть текст\"\n        }\n    })\n})\n\nif (reviewItemEls.length) {\n    window.addEventListener(\"resize\", () => {\n        reviewItemEls.forEach(reviewItemEl => checkReviewHeight(reviewItemEl))\n    })\n}\n\n// faq\nconst faqItemHeaderEls = document.querySelectorAll(\".faq-item__header\");\n\nfaqItemHeaderEls.forEach(faqItemHeaderEl => {\n    let timeoutId;\n    faqItemHeaderEl.addEventListener(\"click\", e => {\n        const faqItemEl = faqItemHeaderEl.parentElement;\n        const faqItemBodyEl = faqItemHeaderEl.nextElementSibling;\n        const faqItemTextEl = faqItemBodyEl.firstElementChild;\n\n        if (faqItemEl.classList.contains(\"faq-item_open\")) {\n            let faqItemBodyHeight = faqItemBodyEl.scrollHeight;\n            faqItemBodyEl.style.height = faqItemBodyHeight + \"px\";\n            faqItemEl.classList.remove(\"faq-item_open\")\n            timeoutId = setTimeout(() => faqItemBodyEl.style.height = \"\")\n        } else {\n            clearTimeout(timeoutId)\n            faqItemEl.classList.add(\"faq-item_open\");\n            faqItemBodyEl.style.height = faqItemTextEl.offsetHeight + \"px\";\n            faqItemBodyEl.addEventListener(\"transitionend\", () => {\n                if (timeoutId) {\n                    return\n                }\n                faqItemBodyEl.style.height = \"auto\"\n            }, { once: true })\n        }\n    })\n})\n\n// seo \nconst seoSection = document.querySelector(\".article-section\");\n\nif (seoSection) {\n    const seoTextEl = seoSection.querySelector(\".article-section__text\");\n    const seoReadMoreEl = seoSection.querySelector(\".article-section__more\");\n\n    function checkSeoTextHeight () {\n        let initialMaxHeightValue;\n        let lineHeight = 1.5;\n        let styles = getComputedStyle(seoTextEl.querySelector(\"p\"))\n        let fontSize = parseFloat(styles.fontSize);\n        let gap = parseFloat(styles.marginBottom)\n        let linesAmount = window.innerWidth <= 576 ? 17 : 10;\n    \n        initialMaxHeightValue = fontSize * lineHeight * linesAmount + gap;\n    \n        if (seoTextEl.offsetHeight < seoTextEl.scrollHeight) {\n            !seoSection.classList.contains(\"_hide\") && seoSection.classList.add(\"_hide\")\n        } else {\n            if (!seoSection.classList.contains(\"_open\")) {\n                seoSection.className = \"article-section\"\n            } else if (seoTextEl.offsetHeight <= initialMaxHeightValue) {\n                seoSection.className = \"article-section\"\n                seoReadMoreEl.querySelector(\"span\").innerHTML = \"Читать полностью\"\n            }\n        }\n    }\n\n    seoReadMoreEl.addEventListener(\"click\", (e) => {\n        if (seoSection.classList.contains(\"_open\")) {\n            seoSection.classList.remove(\"_open\")\n            seoReadMoreEl.querySelector(\"span\").innerHTML = \"Читать полностью\"\n        } else {\n            seoSection.classList.add(\"_open\")\n            seoReadMoreEl.querySelector(\"span\").innerHTML = \"Свернуть текст\"\n        }\n    })\n\n    checkSeoTextHeight()\n\n    window.addEventListener(\"resize\", checkReviewHeight)\n}\n\n\n// contacts-us form\nconst inputEls = document.querySelectorAll(\".form__input\")\nconst inputControlClass = \"form__control\"\n\nfor (let i = 0; i < inputEls.length; i++) {\n    let inputControlEl = inputEls[i].closest(\".\" + inputControlClass)\n\n    // ввод\n    inputEls[i].addEventListener(\"input\", e => {\n        const inputEl = e.target;\n        const changedClass = \"form__control_changed\"\n        if (inputControlEl.classList.contains(inputControlClass + \"_error\")) {\n            inputControlEl.classList.remove(inputControlClass + \"_error\")\n        }\n    })\n    inputEls[i].addEventListener(\"change\", e => {\n        const inputEl = e.target;\n        if (inputEl.value.trim() !== \"\") {\n            inputControlEl.classList.add(\"form__control_filled\")\n        } else {\n            inputControlEl.classList.remove(\"form__control_filled\")\n        }\n\n    })\n    inputEls[i].addEventListener(\"focus\", e => {\n        let focusedControl = document.querySelector(\".\" + inputControlClass + \"_focused\")\n        focusedControl && focusedControl.classList.remove(inputControlClass + \"_focused\")\n        inputControlEl.classList.add(\"form__conrol_focused\")\n    })\n}\n\ndocument.querySelectorAll(\"input[name='phone']\").forEach(inputElement => {\n    inputElement.addEventListener(\"keypress\", (e) => {\n        const length = e.target.value.length;\n        if (e.charCode < 48 || e.charCode > 57 || length > 14) {\n            e.preventDefault();\n            return;\n        }\n\n        switch (length) {\n            case 0: \n                e.target.value = \"8 \" ;\n                break;\n            case 5:\n            case 9:\n            case 12:\n                e.target.value += \" \";\n                break;\n            default:\n                break;\n        }\n    })\n    inputElement.addEventListener(\"input\", e => {e.target.value.length === 2 && (e.target.value = \"\")})\n})\n\n\n// yandex map\n\nfunction init() {\n    function setMapPin() {\n        let myCollection = new ymaps.GeoObjectCollection();\n        let coords = mapEl?.dataset.mark?.split(',').map(Number) || [55.7954692462696,49.10686513125719];\n        // создание и установка пинов\n        myCollection.add(new ymaps.Placemark(coords, {\n            iconLayout: \"default#image\",\n            iconImageHref: imagesSrc.pinImage,\n            iconImageSize: [60, 60],\n        }));\n        // добавление пинов на карту\n        map.geoObjects.add(myCollection);\n        \n        // первоначальная инициализация карты\n        // map.panTo(coord, { duration: 150 })\n    }\n\n    async function getCoords () {\n        setTimeout(() => {\n            setMapPin()\n        }, 2000)\n    }\n    \n    let mapEl = document.getElementById('#map');\n    let center = mapEl?.dataset.center?.split(',').map(Number) || [55.79551291555022,49.10679244528347];\n\n    // создание карты\n    let map = new ymaps.Map(\"map\", {\n        center,\n        controls: [],\n        zoom: 14,\n    })\n    \n    let imagesSrc = document.getElementById(\"map\").dataset\n    \n    getCoords()\n    \n    // zoom ctrl + mouse wheel\n    let ctrlKey = false\n    let body = document.getElementsByTagName('body')[0];\n    map.behaviors.disable(['scrollZoom']);\n    body.onkeydown = callbackDown;\n    body.onkeyup = callbackUp;\n    function callbackDown(e){\n        if(e.keyCode === 17 && !ctrlKey){\n            ctrlKey = true\n            map.behaviors.enable(['scrollZoom']);\n        }\n    }\n    function callbackUp(e){\n        if(e.keyCode === 17){\n            ctrlKey = false\n            map.behaviors.disable(['scrollZoom']);\n        }\n    }\n}\n\nymaps.ready(init);\n\n\n//# sourceURL=webpack://gulp-start/./src/js/app.js?");

/***/ }),

/***/ "./src/js/modules/header.js":
/*!**********************************!*\
  !*** ./src/js/modules/header.js ***!
  \**********************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\nconst isMobile = {\n    Android: function() {\n        return navigator.userAgent.match(/Android/i);\n    },\n    BlackBerry: function() {\n        return navigator.userAgent.match(/BlackBerry/i);\n    },\n    iOS: function() {\n        return navigator.userAgent.match(/iPhone|iPad|iPod/i);\n    },\n    Opera: function() {\n        return navigator.userAgent.match(/Opera Mini/i);\n    },\n    Windows: function() {\n        return navigator.userAgent.match(/IEMobile/i) || navigator.userAgent.match(/WPDesktop/i);\n    },\n    any: function() {\n        return (isMobile.Android() || isMobile.BlackBerry() || isMobile.iOS() || isMobile.Opera() || isMobile.Windows());\n    }\n}; \n\nconst lockPaddingElements = document.querySelector(\"header\");\nconst orderCallEls = document.querySelectorAll(\".header__button, .header__call-desc, .hero-section__button, .footer__button\");\nconst popupEl = document.querySelector(\".popup\")\n\nfunction lockBody() {\n    let paddingValue = window.innerWidth - document.documentElement.clientWidth;\n    if (lockPaddingElements && paddingValue) {\n        lockPaddingElements.style.paddingRight = paddingValue + \"px\"\n    }\n    document.body.classList.add(\"_lock\")\n}\n\nfunction unlockBody () {\n    if (lockPaddingElements) {\n        lockPaddingElements.style.paddingRight = \"\"\n    }\n    document.body.classList.remove(\"_lock\")\n}\n\nfunction closePopup(popup) {\n    popup.classList.remove(\"popup_open\");\n    popup.addEventListener(\"transitionend\", () =>  {\n        if (!document.querySelector(\".header__burger_open\")) {\n            unlockBody() \n        }\n        if (popup.querySelector(\".form-block\").classList.contains(\"form-block_sent\")) {\n            popup.querySelector(\".form-block\").classList.remove(\"form-block_sent\")\n        } else {\n            resetForm(popup.querySelector(\".form\"))\n        }\n    }, {once: true})\n}\n\nfunction openPopup(popup = undefined) {\n    lockBody()\n    if (popup) {\n        popup.classList.add(\"popup_open\")\n    } else {\n        console.log(\"Give me a popup\")\n    }\n}\n\nfunction validateForm(form) {    \n    const reqFiedls = form.querySelectorAll(\"[class$='__input_required']\")\n\n    function changeContentPage(form) {\n        const formBlockEl = form.closest(\".form-block__body\");\n\n        formBlockEl.style.opacity = \"0\"\n        formBlockEl.addEventListener(\"transitionend\", () => {\n            form.closest(\".form-block\").classList.add(\"form-block_sent\")\n            formBlockEl.style.opacity = \"1\"\n        }, { once: true })\n    }\n\n    let errors = 0;\n    for (let i = 0; i < reqFiedls.length; i++) {\n        if (reqFiedls[i].getAttribute(\"name\") === \"name\") {\n            if (reqFiedls[i].value === \"\") {\n                reqFiedls[i].closest(\".form__control\").classList.add(\"form__control_error\");\n                errors++;\n            }\n        }\n        if (reqFiedls[i].getAttribute(\"name\") === \"phone\") {\n            if (reqFiedls[i].value.trim() === \"\" || reqFiedls[i].value.length < 15) {\n                reqFiedls[i].closest(\".form__control\").classList.add(\"form__control_error\");\n                errors++;\n            }\n        }\n    }\n\n    if (errors) {\n        console.log(\"Fill req fields\");\n    } else {\n        form.classList.add(\"form_sending\")\n        form.querySelectorAll(\"input, textarea\").forEach(formField => formField.disabled = true)\n        setTimeout(() => {\n            changeContentPage(form)\n            resetForm(form)\n        }, 1000)\n    }\n}\n\nfunction resetForm(form) {\n    form.reset();\n    form.classList.remove(\"form_sending\")\n    form.querySelectorAll(\".form__control\").forEach(controlEl => controlEl.className = \"form__control\")\n}\n\norderCallEls.forEach(orderCallEl => {\n    orderCallEl.addEventListener(\"click\", (e) => openPopup(popupEl))\n})\n\nfor (let i = 0; i < document.forms.length; i++) {\n    document.forms[i].addEventListener(\"submit\", e => {\n        e.preventDefault();\n        validateForm(e.target)\n        console.log(\"form\")\n    })\n}\n\nif (document.querySelector(\".form__file-input\")) {\n    document.querySelector(\".form__file-input\").addEventListener(\"change\", e => {\n        const parentEl = e.target.closest(\".form__file\");\n        parentEl.querySelector(\".form__file-doc span\").innerHTML = e.target.files[0].name\n        parentEl.classList.add(\"form__file_attached\")\n        parentEl.querySelector(\".form__file-doc button\").addEventListener(\"click\", () => {\n            e.target.value = \"\";\n            parentEl.classList.remove(\"form__file_attached\")\n        }, { once: true })\n    })\n}\n\n\ndocument.querySelector(\".popup__close\").addEventListener(\"click\", e => closePopup(popupEl))\npopupEl.addEventListener(\"click\", e => {\n    if (!e.target.closest(\".popup__content\")) {\n        closePopup(popupEl)\n    }\n})\n\ndocument.addEventListener(\"keydown\", (e) => {\n    if (e.which === 27) {\n        closePopup(popupEl)\n    }\n})\n\nconst menuEl = document.querySelector(\".header__nav\")\nconst menuLinkEls = document.querySelectorAll(\".header__menu-link\");\nconst burgerMenuEl = document.querySelector(\".header__menu\")\n\n\nmenuLinkEls.forEach(menuLinkEl => {\n    menuLinkEl.addEventListener(\"click\", (e) => {\n        let menuItemEl = e.target.closest(\".header__menu-item\");\n        let hasSubmenu = menuItemEl.childElementCount === 3\n        if (!hasSubmenu) {\n            return\n        }\n\n        e.preventDefault();\n        menuItemEl.classList.toggle(\"header__menu-item_open\")\n    })\n})\n\nburgerMenuEl.addEventListener(\"click\", (e) => {\n    let burgerEl = burgerMenuEl.querySelector(\".header__burger\");\n\n    if (burgerEl.classList.contains(\"header__burger_open\")) {\n        unlockBody()\n    } else {\n        lockBody()\n        let openSubmenu = document.querySelector(\".header__menu-item_open\")\n        if (openSubmenu) {\n            openSubmenu.classList.remove(\"header__menu-item_open\")\n        }\n    }\n    \n    burgerEl.classList.toggle(\"header__burger_open\")\n    menuEl.classList.toggle(\"header__nav_open\")\n})\n\nfunction documentActions(event) {\n    const targetEl = event.target;\n\n    if (!targetEl.closest(\".header__menu-item\")) {\n        document.querySelectorAll(\".header__menu-item_hover\").forEach(activeMenuItem => activeMenuItem.classList.remove(\"header__menu-item_hover\"))\n    }\n}\n\nconst headerEl = document.querySelector(\".header\");\nconst minYOffset = 70;\nlet lastPageY = 0\n\nfunction handleScroll() {\n    let pageY = window.pageYOffset;\n    if (headerEl.querySelector(\".header__burger\").classList.contains(\"header__burger_open\"))\n        return\n    if (lastPageY < pageY && pageY > minYOffset) {\n        if (!headerEl.classList.contains(\"header_hide\")) {\n            headerEl.classList.add(\"header_hide\")\n            headerEl.classList.remove(\"header_show\")\n        }\n    } else if (lastPageY > pageY) {\n        if (!headerEl.classList.contains(\"header_show\")) {\n            headerEl.classList.remove(\"header_hide\")\n            headerEl.classList.add(\"header_show\")\n        }\n        if (pageY < minYOffset && headerEl.classList.contains(\"header_show\")) {\n            headerEl.classList.remove(\"header_show\")\n        }\n    }\n\n    lastPageY = pageY\n}\nwindow.addEventListener(\"scroll\", handleScroll)\n\nif (window.pageYOffset > minYOffset) {\n    headerEl.classList.add(\"header_hide\")\n}\n\ndocument.addEventListener(\"click\", documentActions);\n\nlet tabMediaQuery = window.matchMedia(\"(max-width: 992px)\")\n\ntabMediaQuery.addEventListener(\"change\", e => {\n    if (!e.matches) {\n        if (burgerMenuEl.querySelector(\".header__burger\").classList.contains(\"header__burger_open\")) {\n            burgerMenuEl.querySelector(\".header__burger\").classList.remove(\"header__burger_open\");\n            menuEl.classList.remove(\"header__nav_open\");\n            document.querySelectorAll(\".header__menu-item_open\").forEach(menuItemEl => menuItemEl.classList.remove(\"header__menu-item_open\"))\n        }\n    }\n})\n\n//# sourceURL=webpack://gulp-start/./src/js/modules/header.js?");

/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			// no module.id needed
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId](module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/make namespace object */
/******/ 	(() => {
/******/ 		// define __esModule on exports
/******/ 		__webpack_require__.r = (exports) => {
/******/ 			if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 				Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 			}
/******/ 			Object.defineProperty(exports, '__esModule', { value: true });
/******/ 		};
/******/ 	})();
/******/ 	
/************************************************************************/
/******/ 	
/******/ 	// startup
/******/ 	// Load entry module and return exports
/******/ 	// This entry module can't be inlined because the eval devtool is used.
/******/ 	var __webpack_exports__ = __webpack_require__("./src/js/app.js");
/******/ 	
/******/ })()
;